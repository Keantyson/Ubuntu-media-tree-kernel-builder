From ee8be38a18e390c658cd25cf508a398d4d2e5627 Mon Sep 17 00:00:00 2001
From: Brad Love <brad@nextdimension.cc>
Date: Wed, 29 Mar 2017 14:43:48 -0500
Subject: [PATCH 5/5] Maintainer, changelog, git url updates

---
 debian.master/changelog         | 25 +++++++++++++++++++++++++
 debian.master/control.stub.in   |  6 ++++--
 debian.master/copyright         | 21 +++++++++++++++++++++
 debian/rules.d/0-common-vars.mk |  9 +++++++--
 debian/rules.d/2-binary-arch.mk |  4 ++++
 5 files changed, 61 insertions(+), 4 deletions(-)

diff --git a/debian.master/changelog b/debian.master/changelog
index 0b7e9b08..bc79a5e 100644
--- a/debian.master/changelog
+++ b/debian.master/changelog
@@ -1,3 +1,28 @@
+linux (4.4.0-66201703291443.0+mediatree+hauppauge) xenial; urgency=low
+
+  * Ubuntu kernel git clone
+    - 4.4.0-66.87 rev 05022128a513a344d156de5bffd88e3dda4c8da6
+
+  * LinuxTV.org media tree slipstream + build fixes
+    - 0001-Linuxtv.org-media-tree-sync-2017-03-29-18-06.patch
+    - 0002-Apply-build-fixes-to-media-tree.patch
+    - 0003-Add-new-media-tree-kernel-config.patch
+
+  * Ubuntu mainline build fixes
+    - 0004-Mainline-Ubuntu-build-fixes.patch
+
+  * Packaging patches
+    - 0005-Maintainer-changelog-git-url-updates.patch
+
+  * Additional patches
+    - 0006-lgdt3306a-i2c-mux-backport.patch
+    - 0007-Hauppauge-WinTV-DualHD-DVB-ATSC-second-tuner-support.patch
+    - 0008-em28xx-bulk-transfer-implementation-fix.patch
+    - 0009-usb-packet-size-tweaks.patch
+    - 0010-lgdt3306a-add-QAM-AUTO.patch
+
+ -- Brad Love <brad@nextdimension.cc>  Wed, 29 Mar 2017 14:43:48 -0500
+
 linux (4.4.0-66.87) xenial; urgency=low
 
   * CVE-2017-2636
diff --git a/debian.master/control.stub.in b/debian.master/control.stub.in
index 9f4f817..3c1828e 100644
--- a/debian.master/control.stub.in
+++ b/debian.master/control.stub.in
@@ -1,7 +1,8 @@
 Source: linux
 Section: devel
 Priority: optional
-Maintainer: Ubuntu Kernel Team <kernel-team@lists.ubuntu.com>
+Maintainer: Brad Love (Hauppauge) <brad@nextdimension.cc>
+XSBC-Original-Maintainer: Ubuntu Kernel Team <kernel-team@lists.ubuntu.com>
 Standards-Version: 3.9.4.0
 Build-Depends:
  debhelper (>= 5),
@@ -44,7 +45,8 @@ Build-Depends-Indep:
  bzip2 <!stage1>,
  sharutils <!stage1>,
  asciidoc <!stage1>,
-Vcs-Git: git://git.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/xenial
+Vcs-Git: git://github.com/~b-rad-NDi/Ubuntu-media-tree-kernel-builder.git
+Vcs-Browser: https://github.com/b-rad-NDi/Ubuntu-media-tree-kernel-builder
 XS-Testsuite: autopkgtest
 #XS-Testsuite-Depends: gcc-4.7 binutils
 
diff --git a/debian.master/copyright b/debian.master/copyright
index d1d04a6..0a3a226 100644
--- a/debian.master/copyright
+++ b/debian.master/copyright
@@ -1,3 +1,24 @@
+#############################################################
+#############################################################
+#############################################################
+
+This is a patched version of the Ubuntu kernel.
+The latest media tree drivers from https://linuxtv.com are slip streamed in.
+
+Additional patches for hardware/performance/etc are also included.
+
+All patches are available at https://github.com/b-rad-NDi/Ubuntu-media-tree-kernel-builder
+
+The packaging and build system is currently maintained by
+brad at nextdimension dot cc for Hauppauge Computer Works.
+
+Errors in packaging or building should be directed to github above.
+Bugs in the kernel or media tree drivers should be reported upstream.
+
+#############################################################
+#############################################################
+#############################################################
+
 This is the Ubuntu prepackaged version of the Linux kernel.
 Linux was written by Linus Torvalds <Linus.Torvalds@cs.Helsinki.FI>
 and others.
diff --git a/debian/rules.d/0-common-vars.mk b/debian/rules.d/0-common-vars.mk
index ccc65dc..b8fce14 100644
--- a/debian/rules.d/0-common-vars.mk
+++ b/debian/rules.d/0-common-vars.mk
@@ -27,6 +27,11 @@ family=ubuntu
 # or configs.
 AUTOBUILD=
 
+skipabi         ?= true
+skipmodule      ?= true
+skipdbg         ?= true
+do_binary_udebs ?= false
+
 ifneq ($(AUTOBUILD),)
 skipabi		= true
 skipmodule	= true
@@ -134,8 +139,8 @@ indep_hdrs_pkg_name=$(src_pkg_name)-headers-$(abi_release)
 # cycle, so its OK to leave 'do_doc_package_content=false' until those build
 # failures get sorted out. Finally, the doc package doesn't really need to be built
 # for developer testing (its kind of slow), so only do it if on a buildd.
-do_doc_package=true
-do_doc_package_content=true
+do_doc_package?=false
+do_doc_package_content?=false
 ifeq ($(full_build),false)
 do_doc_package_content=false
 endif
diff --git a/debian/rules.d/2-binary-arch.mk b/debian/rules.d/2-binary-arch.mk
index 8ce1fa8..626d4f0 100644
--- a/debian/rules.d/2-binary-arch.mk
+++ b/debian/rules.d/2-binary-arch.mk
@@ -721,10 +721,14 @@ build-arch: $(build-arch-deps-true)
 	@echo Debug: $@
 
 ifeq ($(AUTOBUILD),)
+ifeq ($(do_binary_udebs),true)
 binary-arch-deps-$(do_flavour_image_package) += binary-udebs
 else
 binary-arch-deps-$(do_flavour_image_package) = binary-debs
 endif
+else
+binary-arch-deps-$(do_flavour_image_package) = binary-debs
+endif
 binary-arch-deps-$(do_libc_dev_package) += binary-arch-headers
 ifneq ($(do_common_headers_indep),true)
 binary-arch-deps-$(do_flavour_header_package) += binary-headers
-- 
2.7.4

