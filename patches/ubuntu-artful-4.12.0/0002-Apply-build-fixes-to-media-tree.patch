From 8210132298e18e25b60f4c5753eb1a6d72bb4d97 Mon Sep 17 00:00:00 2001
From: root <hidden@email.co>
Date: Tue, 10 Oct 2017 16:27:14 +0000
Subject: [PATCH 02/17] Apply build fixes to media tree

---
 drivers/media/cec/cec-api.c           |  2 ++
 drivers/media/cec/cec-api.c.rej       | 10 ++++++++++
 drivers/media/media-device.c          |  2 ++
 drivers/media/usb/em28xx/em28xx-dvb.c |  2 +-
 drivers/media/usb/uvc/uvc_driver.c    |  2 ++
 drivers/media/v4l2-core/v4l2-ioctl.c  |  2 ++
 6 files changed, 19 insertions(+), 1 deletion(-)
 create mode 100644 drivers/media/cec/cec-api.c.rej

diff --git a/drivers/media/cec/cec-api.c b/drivers/media/cec/cec-api.c
index 8ac616d2927b..af34e23e53b5 100644
--- a/drivers/media/cec/cec-api.c
+++ b/drivers/media/cec/cec-api.c
@@ -30,6 +30,8 @@
 #include <linux/uaccess.h>
 #include <linux/version.h>
 
+#include <media/compat.h>
+
 #include <media/cec-pin.h>
 #include "cec-priv.h"
 
diff --git a/drivers/media/cec/cec-api.c.rej b/drivers/media/cec/cec-api.c.rej
new file mode 100644
index 000000000000..4e31b3893f43
--- /dev/null
+++ b/drivers/media/cec/cec-api.c.rej
@@ -0,0 +1,10 @@
+diff a/drivers/media/cec/cec-api.c b/drivers/media/cec/cec-api.c	(rejected hunks)
+@@ -30,6 +30,8 @@
+ #include <linux/uaccess.h>
+ #include <linux/version.h>
+ 
++#include <media/compat.h>
++
+ #include "cec-priv.h"
+ 
+ static inline struct cec_devnode *cec_devnode_data(struct file *filp)
diff --git a/drivers/media/media-device.c b/drivers/media/media-device.c
index 77c2abad24b7..080e5c038b3b 100644
--- a/drivers/media/media-device.c
+++ b/drivers/media/media-device.c
@@ -33,6 +33,8 @@
 #include <media/media-devnode.h>
 #include <media/media-entity.h>
 
+#include <media/compat.h>
+
 #ifdef CONFIG_MEDIA_CONTROLLER
 
 /* -----------------------------------------------------------------------------
diff --git a/drivers/media/usb/em28xx/em28xx-dvb.c b/drivers/media/usb/em28xx/em28xx-dvb.c
index 5b01ff520b82..d46fc1108cf9 100644
--- a/drivers/media/usb/em28xx/em28xx-dvb.c
+++ b/drivers/media/usb/em28xx/em28xx-dvb.c
@@ -44,7 +44,7 @@
 #include "mt352.h"
 #include "mt352_priv.h" /* FIXME */
 #include "tda1002x.h"
-#include "drx39xxj.h"
+#include "../../dvb-frontends/drx39xyj/drx39xxj.h"
 #include "tda18271.h"
 #include "s921.h"
 #include "drxd.h"
diff --git a/drivers/media/usb/uvc/uvc_driver.c b/drivers/media/usb/uvc/uvc_driver.c
index 6d22b22cb35b..e9afd13a1f7f 100644
--- a/drivers/media/usb/uvc/uvc_driver.c
+++ b/drivers/media/usb/uvc/uvc_driver.c
@@ -25,6 +25,8 @@
 
 #include <media/v4l2-common.h>
 
+#include <media/compat.h>
+
 #include "uvcvideo.h"
 
 #define DRIVER_AUTHOR		"Laurent Pinchart " \
diff --git a/drivers/media/v4l2-core/v4l2-ioctl.c b/drivers/media/v4l2-core/v4l2-ioctl.c
index fc2453c41dea..0349c94bb9da 100644
--- a/drivers/media/v4l2-core/v4l2-ioctl.c
+++ b/drivers/media/v4l2-core/v4l2-ioctl.c
@@ -32,6 +32,8 @@
 
 #include <trace/events/v4l2.h>
 
+#include <media/compat.h>
+
 /* Zero out the end of the struct pointed to by p.  Everything after, but
  * not including, the specified field is cleared. */
 #define CLEAR_AFTER_FIELD(p, field) \
-- 
2.11.0

