From 3973a19ceef47c86b2cc2a002fe83e3d90f183cd Mon Sep 17 00:00:00 2001
From: root <hidden@email.co>
Date: Tue, 10 Oct 2017 18:54:15 +0000
Subject: [PATCH 2/6] Apply build fixes to media tree

---
 drivers/media/cec/cec-api.c                | 2 ++
 drivers/media/dvb-core/dvb_net.c           | 2 ++
 drivers/media/media-device.c               | 2 ++
 drivers/media/pci/ddbridge/ddbridge-core.c | 2 ++
 drivers/media/radio/wl128x/fmdrv_common.c  | 5 ++++-
 drivers/media/usb/em28xx/em28xx-dvb.c      | 2 +-
 drivers/media/usb/uvc/uvc_driver.c         | 2 ++
 drivers/media/v4l2-core/v4l2-ioctl.c       | 2 ++
 8 files changed, 17 insertions(+), 2 deletions(-)

diff --git a/drivers/media/cec/cec-api.c b/drivers/media/cec/cec-api.c
index 8ac616d2927b..af34e23e53b5 100644
--- a/drivers/media/cec/cec-api.c
+++ b/drivers/media/cec/cec-api.c
@@ -30,6 +30,8 @@
 #include <linux/uaccess.h>
 #include <linux/version.h>
 
+#include <media/compat.h>
+
 #include <media/cec-pin.h>
 #include "cec-priv.h"
 
diff --git a/drivers/media/dvb-core/dvb_net.c b/drivers/media/dvb-core/dvb_net.c
index 1bf636bfb763..dd504abba371 100644
--- a/drivers/media/dvb-core/dvb_net.c
+++ b/drivers/media/dvb-core/dvb_net.c
@@ -65,6 +65,8 @@
 #include <linux/mutex.h>
 #include <linux/sched.h>
 
+#include <media/compat.h>
+
 #include "dvb_demux.h"
 #include "dvb_net.h"
 
diff --git a/drivers/media/media-device.c b/drivers/media/media-device.c
index 77c2abad24b7..080e5c038b3b 100644
--- a/drivers/media/media-device.c
+++ b/drivers/media/media-device.c
@@ -33,6 +33,8 @@
 #include <media/media-devnode.h>
 #include <media/media-entity.h>
 
+#include <media/compat.h>
+
 #ifdef CONFIG_MEDIA_CONTROLLER
 
 /* -----------------------------------------------------------------------------
diff --git a/drivers/media/pci/ddbridge/ddbridge-core.c b/drivers/media/pci/ddbridge/ddbridge-core.c
index f4bd4908acdd..a09148ac3fc6 100644
--- a/drivers/media/pci/ddbridge/ddbridge-core.c
+++ b/drivers/media/pci/ddbridge/ddbridge-core.c
@@ -34,6 +34,8 @@
 #include <linux/swab.h>
 #include <linux/vmalloc.h>
 
+#include <media/compat.h>
+
 #include "ddbridge.h"
 #include "ddbridge-i2c.h"
 #include "ddbridge-regs.h"
diff --git a/drivers/media/radio/wl128x/fmdrv_common.c b/drivers/media/radio/wl128x/fmdrv_common.c
index ab3428bf63fe..64eadfb45947 100644
--- a/drivers/media/radio/wl128x/fmdrv_common.c
+++ b/drivers/media/radio/wl128x/fmdrv_common.c
@@ -31,6 +31,9 @@
 #include <linux/module.h>
 #include <linux/firmware.h>
 #include <linux/delay.h>
+
+#include <media/compat.h>
+
 #include "fmdrv.h"
 #include "fmdrv_v4l2.h"
 #include "fmdrv_common.h"
@@ -416,7 +419,7 @@ static int fm_send_cmd(struct fmdev *fmdev, u8 fm_op, u16 type,	void *payload,
 	if (!test_bit(FM_FW_DW_INPROGRESS, &fmdev->flag) ||
 			test_bit(FM_INTTASK_RUNNING, &fmdev->flag)) {
 		/* Fill command header info */
-		hdr = skb_put(skb, FM_CMD_MSG_HDR_SIZE);
+		hdr = (void*)skb_put(skb, FM_CMD_MSG_HDR_SIZE);
 		hdr->hdr = FM_PKT_LOGICAL_CHAN_NUMBER;	/* 0x08 */
 
 		/* 3 (fm_opcode,rd_wr,dlen) + payload len) */
diff --git a/drivers/media/usb/em28xx/em28xx-dvb.c b/drivers/media/usb/em28xx/em28xx-dvb.c
index 5b01ff520b82..d46fc1108cf9 100644
--- a/drivers/media/usb/em28xx/em28xx-dvb.c
+++ b/drivers/media/usb/em28xx/em28xx-dvb.c
@@ -44,7 +44,7 @@
 #include "mt352.h"
 #include "mt352_priv.h" /* FIXME */
 #include "tda1002x.h"
-#include "drx39xxj.h"
+#include "../../dvb-frontends/drx39xyj/drx39xxj.h"
 #include "tda18271.h"
 #include "s921.h"
 #include "drxd.h"
diff --git a/drivers/media/usb/uvc/uvc_driver.c b/drivers/media/usb/uvc/uvc_driver.c
index 6d22b22cb35b..e9afd13a1f7f 100644
--- a/drivers/media/usb/uvc/uvc_driver.c
+++ b/drivers/media/usb/uvc/uvc_driver.c
@@ -25,6 +25,8 @@
 
 #include <media/v4l2-common.h>
 
+#include <media/compat.h>
+
 #include "uvcvideo.h"
 
 #define DRIVER_AUTHOR		"Laurent Pinchart " \
diff --git a/drivers/media/v4l2-core/v4l2-ioctl.c b/drivers/media/v4l2-core/v4l2-ioctl.c
index fc2453c41dea..0349c94bb9da 100644
--- a/drivers/media/v4l2-core/v4l2-ioctl.c
+++ b/drivers/media/v4l2-core/v4l2-ioctl.c
@@ -32,6 +32,8 @@
 
 #include <trace/events/v4l2.h>
 
+#include <media/compat.h>
+
 /* Zero out the end of the struct pointed to by p.  Everything after, but
  * not including, the specified field is cleared. */
 #define CLEAR_AFTER_FIELD(p, field) \
-- 
2.14.1

